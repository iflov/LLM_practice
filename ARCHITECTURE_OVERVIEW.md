# ì•„í‚¤í…ì²˜ ê°œìš”

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ

LLM Agent ê°œë°œ ê²½í—˜ì„ ìŒ“ê¸° ìœ„í•œ POC í”„ë¡œì íŠ¸ë¡œ, ë‹¤ìŒì„ í•™ìŠµí•˜ê³  êµ¬í˜„:
- Agent ì‹œìŠ¤í…œì˜ ê¸°ë³¸ êµ¬ì¡°
- Tool calling ë©”ì»¤ë‹ˆì¦˜
- í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- ëŒ€í™” ìƒíƒœ ê´€ë¦¬

## ğŸ›ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Presentation Layer             â”‚
â”‚                   (FastAPI Routes)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Business Layer                 â”‚
â”‚               (Agents & Tools)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Service Layer                  â”‚
â”‚        (OpenRouter, Session Manager)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Data Layer                   â”‚
â”‚             (Redis, SQLite)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ë‹¤ì´ì–´ê·¸ë¨

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Client    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTP/SSE
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚   FastAPI   â”‚
                    â”‚   Server    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚    Agent     â”‚  â”‚Session Manager â”‚  â”‚   Router    â”‚
â”‚   Manager    â”‚  â”‚    (Redis)     â”‚  â”‚   (API)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LangChain Agent          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Memory  â”‚  â”‚Tool Executor â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
       â”‚Calculatorâ”‚ â”‚Weatherâ”‚ â”‚ Search â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### 1. ë©”ì‹œì§€ ì²˜ë¦¬ í”Œë¡œìš°
```
User Input â†’ API Gateway â†’ Session Validation â†’ Agent Processing
    â†“                                               â†“
Response â† Format Response â† Save History â† Execute Tools
```

### 2. Tool Calling í”Œë¡œìš°
```
1. User: "What's the weather in Seoul?"
2. Agent: Analyze intent â†’ Need weather tool
3. Tool: Execute weather.run(city="Seoul")
4. Agent: Format tool result
5. Response: "The weather in Seoul is..."
```

## ğŸ’¾ ë°ì´í„° ëª¨ë¸

### Redis ì„¸ì…˜ êµ¬ì¡°
```json
{
  "session_id": "uuid",
  "created_at": "2024-01-01T00:00:00",
  "messages": [
    {
      "role": "user|assistant",
      "content": "message text",
      "timestamp": "2024-01-01T00:00:00",
      "metadata": {}
    }
  ],
  "context": {
    "current_tool": "calculator",
    "last_action": "calculate"
  }
}
```

### SQLite ìŠ¤í‚¤ë§ˆ
```sql
CREATE TABLE chat_history (
    id INTEGER PRIMARY KEY,
    session_id VARCHAR(100),
    user_message TEXT,
    assistant_message TEXT,
    tools_used JSON,
    model_used VARCHAR(100),
    tokens_used INTEGER,
    cost FLOAT,
    created_at DATETIME,
    extra_metadata JSON
);
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **API Key ê´€ë¦¬**: í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
2. **ì„¸ì…˜ ê²€ì¦**: ëª¨ë“  ìš”ì²­ì—ì„œ ì„¸ì…˜ ìœ íš¨ì„± í™•ì¸
3. **ì…ë ¥ ê²€ì¦**: Pydantic ëª¨ë¸ë¡œ ìë™ ê²€ì¦
4. **Rate Limiting**: (TODO) êµ¬í˜„ í•„ìš”
5. **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼ ê°€ëŠ¥

## ğŸš€ í™•ì¥ ê°€ëŠ¥ì„±

### 1. ì¶”ê°€ ê°€ëŠ¥í•œ ë„êµ¬ë“¤
- **Database Query**: SQL ì¿¼ë¦¬ ì‹¤í–‰
- **File Operations**: íŒŒì¼ ì½ê¸°/ì“°ê¸°
- **External APIs**: ì‹¤ì œ ë‚ ì”¨, ë‰´ìŠ¤ API ì—°ë™
- **Code Execution**: ì½”ë“œ ì‹¤í–‰ í™˜ê²½

### 2. Agent ê°œì„  ë°©í–¥
- **Multi-Agent**: ì „ë¬¸ ë¶„ì•¼ë³„ Agent í˜‘ì—…
- **Memory ê°œì„ **: ì¥ê¸° ê¸°ì–µ, ì‚¬ìš©ì ì„ í˜¸ë„
- **Planning**: ë³µì¡í•œ ì‘ì—…ì„ ìœ„í•œ ê³„íš ìˆ˜ë¦½
- **Self-Reflection**: Agentì˜ ìê¸° í‰ê°€

### 3. ì¸í”„ë¼ ê°œì„ 
- **Message Queue**: RabbitMQ/Kafka for ë¹„ë™ê¸° ì²˜ë¦¬
- **Vector DB**: ì˜ë¯¸ ê²€ìƒ‰ì„ ìœ„í•œ Pinecone/Weaviate
- **Monitoring**: Prometheus + Grafana
- **Container**: Docker/Kubernetes ë°°í¬

## ğŸ“Š ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

1. **ìºì‹± ì „ëµ**
   - Redis: í™œì„± ì„¸ì…˜ (TTL 1ì‹œê°„)
   - LRU ìºì‹œ: ìì£¼ ì‚¬ìš©ë˜ëŠ” ë„êµ¬ ê²°ê³¼

2. **ë¹„ë™ê¸° ì²˜ë¦¬**
   - ëª¨ë“  I/O ì‘ì—…ì€ async/await
   - ë™ì‹œ ìš”ì²­ ì²˜ë¦¬ ê°€ëŠ¥

3. **í† í° ìµœì í™”**
   - ëŒ€í™” ê¸°ë¡ ì••ì¶•
   - ë¶ˆí•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ ì œê±°

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

1. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**: ê° ë„êµ¬ ë° ì„œë¹„ìŠ¤
2. **í†µí•© í…ŒìŠ¤íŠ¸**: API ì—”ë“œí¬ì¸íŠ¸
3. **E2E í…ŒìŠ¤íŠ¸**: ì „ì²´ ëŒ€í™” í”Œë¡œìš°
4. **ë¶€í•˜ í…ŒìŠ¤íŠ¸**: ë™ì‹œ ì ‘ì†ì ì²˜ë¦¬